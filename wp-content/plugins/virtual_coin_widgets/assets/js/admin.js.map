{"version":3,"sources":["../../js/admin.js"],"names":["$","VCW","builder","hide_selector","all_fields","fields","elements","attach","form","preview","code","submit","find","shortcode","on","refresh","click","render","hideFields","hide","showFields","widget","val","selector","map","field","i","join","show","callRender","cb","req","type","url","ajax_url","data","action","forEach","ajax","done","response","html","element","compile","length","jQuery","VirtualCoinWidgets"],"mappings":"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","file":"admin.js","sourcesContent":["(($,VCW) => {\n\n    const builder = {\n        hide_selector: '.symbol-row,.symbol1-row,.symbol2-row,.symbols-row,.currency-row,.currency1-row,.currency2-row,.currency3-row,.url-row,.target-row,.initial-row,.count-row',\n\n        all_fields: ['shortcode','color','fullwidth','symbol','symbol1','symbol2','symbols','currency','currency1','currency2','currency3','url','target','initial','count'],\n\n        fields: {\n            'price-label': ['symbol', 'currency', 'url', 'target'],\n            'change-label': ['symbol', 'url', 'target'],\n            'price-big-label': ['symbol', 'currency1', 'currency2', 'currency3', 'url', 'target'],\n            'change-big-label': ['symbol', 'url', 'target'],\n            'price-card': ['symbol', 'currency1', 'currency2', 'currency3', 'url', 'target'],\n            'change-card': ['symbol', 'url', 'target'],\n            'full-card': ['symbol', 'currency1', 'currency2', 'currency3', 'url', 'target'],\n            'converter': ['symbol1', 'symbol2', 'initial'],\n            'table': ['currency', 'symbols', 'count'],\n            'small-table': ['currency', 'symbols', 'count']\n        },\n        elements: null,\n\n        attach(form, preview, code) {\n            form.submit(false);\n\n            const elements = builder.elements = {\n                form: form,\n                submit: form.find('.render-submit'),\n                shortcode: form.find('[name=shortcode]'),\n                preview: preview,\n                code: code\n            }\n\n            elements.shortcode.on('change keyup paste', () => builder.refresh())\n            elements.submit.click(() => builder.render())\n        },\n        hideFields() {\n            builder.elements.form.find(this.hide_selector).hide();\n        },\n        showFields() {\n            const widget  = builder.elements.shortcode.val(),\n                fields = builder.fields[widget]\n\n            const selector = fields\n                .map((field,i) => `.${field}-row`)\n                .join(',')\n\n            builder.elements.form.find(selector).show();\n        },\n        refresh() {\n            builder.hideFields()\n            builder.showFields()\n        },\n        callRender(cb) {\n            const elements = builder.elements,\n                req = {\n                    type: 'POST',\n                    url: VCW.ajax_url,\n                    data: {\n                        action: 'vcw_render',\n                    }\n                }\n\n            builder.all_fields.forEach((field) => {\n                req.data[field] = elements.form.find(`[name=${field}]`).val()\n            })\n\n            $.ajax(req).done((response) => {\n                if (response && response.html && response.code) {\n                    cb(response.html, response.code)\n                }\n            })\n        },\n        render() {\n            const element = builder.elements\n\n            builder.callRender((html,code) => {\n                element.preview.html(html)\n                element.code.find('textarea').val(code)\n                VCW.compile();\n            })\n        }\n    }\n\n    $(() => {\n        if($('#vcw-admin-page').length) {\n            builder.attach($('#vcw-admin-builder'), $('#vcw-admin-preview'), $('#vcw-admin-code'))\n            builder.refresh()\n        }\n    })\n\n})(jQuery,VirtualCoinWidgets)"]}